<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comick Reader â€“ Stage 2</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<script src="https://unpkg.com/epubjs/dist/epub.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{
  background:radial-gradient(circle at top,#121212,#000);
  color:#eee;overflow:hidden;
}
h1{font-size:2.4rem;text-align:center;padding:20px;font-weight:600;}
.container{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  min-height:calc(100vh - 100px);
}
button{
  background:rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.2);
  color:#fff;padding:10px 20px;border-radius:12px;
  font-size:1rem;cursor:pointer;backdrop-filter:blur(8px);
  transition:0.3s;
}
button:hover{
  background:rgba(255,255,255,0.2);
  box-shadow:0 0 20px rgba(255,255,255,0.2);
}
#reader{
  width:80%;height:70vh;
  margin-top:20px;
  border-radius:16px;
  overflow:hidden;
  box-shadow:0 0 25px rgba(255,255,255,0.1);
  background:rgba(255,255,255,0.05);
}
#cursorOrb{
  position:fixed;top:0;left:0;width:26px;height:26px;
  border-radius:50%;
  pointer-events:none;
  transform:translate(-50%,-50%);
  background:radial-gradient(circle,rgba(255,255,255,0.9),rgba(255,255,255,0.1));
  box-shadow:0 0 20px rgba(255,255,255,0.4);
  transition:transform 0.15s ease, box-shadow 0.2s ease;
  z-index:9999;
}
button:hover ~ #cursorOrb{
  transform:translate(-50%,-50%) scale(1.3);
  box-shadow:0 0 30px rgba(255,255,255,0.8);
}
</style>
</head>
<body>

<h1>ðŸ“– Comick EPUB Reader</h1>
<div class="container">
  <input type="file" id="fileInput" accept=".epub" hidden>
  <button id="uploadBtn">Upload EPUB</button>
  <div id="reader"></div>
</div>
<div id="cursorOrb"></div>

<script>
// --- Cursor orb ---
const orb=document.getElementById('cursorOrb');
document.addEventListener('mousemove',e=>{
  orb.style.left=e.clientX+'px';
  orb.style.top=e.clientY+'px';
});

// --- EPUB logic ---
const uploadBtn=document.getElementById('uploadBtn');
const fileInput=document.getElementById('fileInput');
const readerDiv=document.getElementById('reader');
let rendition=null;

uploadBtn.onclick=()=>fileInput.click();

fileInput.addEventListener('change',async e=>{
  const file=e.target.files[0];
  if(!file)return;
  const url=URL.createObjectURL(file);
  readerDiv.innerHTML=""; // clear
  const book=ePub(url);
  rendition=book.renderTo("reader",{width:"100%",height:"100%"});
  rendition.display();
  rendition.themes.default({
    'body':{'color':'#fff','background':'transparent','line-height':'1.6','font-size':'1.1rem'},
    'p':{'margin':'1em 0'}
  });
});
</script>

</body>
</html>
